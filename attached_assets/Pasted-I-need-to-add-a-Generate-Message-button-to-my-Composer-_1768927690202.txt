I need to add a "Generate Message" button to my Composer component that calls an n8n webhook to generate AI-powered outreach messages.
Webhook Details:

Production URL: https://n8n.srv1096794.hstgr.cloud/webhook/generate-outreach
Method: POST
Timeout: 60 seconds

Request Payload (send this data to the webhook):
typescript{
  contactName: string,
  contactTitle: string,
  contactCompany: string,
  contactLinkedIn: string,
  contactNotes: string,
  outreachGoal: string,
  channel: string,
  personalizationSource: string,
  tone: string,
  length: string,
  cta: string,
  timeframe: string,
  campaign: string
}
Response Format (what comes back from webhook):
json{
  "subject": null | string,
  "message": string,
  "characterCount": number,
  "wordCount": number,
  "personalizationScore": "High" | "Medium" | "Low",
  "issues": string[],
  "metadata": {
    "channel": string,
    "tone": string,
    "cta": string
  }
}
Implementation Requirements:

Add state variables in Composer component:

typescriptconst [isGenerating, setIsGenerating] = useState(false);
const [generatedMessage, setGeneratedMessage] = useState("");
const [generatedSubject, setGeneratedSubject] = useState("");
const [generationError, setGenerationError] = useState("");

Add handleGenerate function:

typescriptconst handleGenerate = async () => {
  // Validate inputs
  if (!selectedContact) {
    toast({ title: "Please select a contact first", variant: "destructive" });
    return;
  }
  
  if (!formData.outreachGoal || !formData.channel || !formData.cta) {
    toast({ title: "Please fill in Goal, Channel, and CTA fields", variant: "destructive" });
    return;
  }

  setIsGenerating(true);
  setGenerationError("");

  try {
    const response = await fetch("https://n8n.srv1096794.hstgr.cloud/webhook/generate-outreach", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        contactName: selectedContact.name,
        contactTitle: selectedContact.title || "",
        contactCompany: selectedContact.company || "",
        contactLinkedIn: selectedContact.linkedin || "",
        contactNotes: selectedContact.notes || "",
        outreachGoal: formData.outreachGoal,
        channel: formData.channel,
        personalizationSource: formData.personalizationSource || "",
        tone: formData.tone || "Professional",
        length: formData.length || "Medium",
        cta: formData.cta,
        timeframe: formData.timeframe || "",
        campaign: formData.campaign || ""
      }),
      signal: AbortSignal.timeout(60000)
    });

    if (!response.ok) {
      throw new Error(`HTTP ${response.status}`);
    }

    const result = await response.json();

    // Auto-fill the form with generated content
    setFormData(prev => ({
      ...prev,
      messageBody: result.message,
      subject: result.subject || prev.subject
    }));

    setGeneratedMessage(result.message);
    if (result.subject) setGeneratedSubject(result.subject);

    // Warning for connection requests that are too long
    if (formData.channel === "linkedin_connect_request" && result.characterCount > 300) {
      toast({
        title: "Message too long for connection request",
        description: `${result.characterCount} characters (max 300). Please edit.`,
        variant: "destructive"
      });
    } else {
      toast({
        title: "Message generated successfully!",
        description: `${result.wordCount} words, ${result.personalizationScore} personalization`,
      });
    }

  } catch (error) {
    console.error("Generation failed:", error);
    setGenerationError(error.message);
    toast({
      title: "Failed to generate message",
      description: "Please try again or write manually",
      variant: "destructive"
    });
  } finally {
    setIsGenerating(false);
  }
};

Add UI in the "Generate" step of the form:

tsx<div className="space-y-4">
  <Button
    type="button"
    onClick={handleGenerate}
    disabled={isGenerating || !selectedContact}
    className="w-full"
    size="lg"
  >
    {isGenerating ? (
      <>
        <Loader2 className="w-4 h-4 mr-2 animate-spin" />
        Generating AI Message...
      </>
    ) : (
      <>
        <Sparkles className="w-4 h-4 mr-2" />
        Generate Message with AI
      </>
    )}
  </Button>

  {generationError && (
    <Alert variant="destructive">
      <AlertDescription>{generationError}</AlertDescription>
    </Alert>
  )}

  {generatedMessage && (
    <div className="space-y-2">
      <Label className="text-xs text-muted-foreground">Generated Message Preview</Label>
      <div className="p-4 bg-muted/50 rounded-lg border">
        {generatedSubject && (
          <div className="mb-2">
            <span className="text-xs font-medium">Subject:</span>
            <p className="text-sm font-medium">{generatedSubject}</p>
          </div>
        )}
        <p className="text-sm whitespace-pre-wrap">{generatedMessage}</p>
      </div>
      <div className="flex items-center justify-between text-xs text-muted-foreground">
        <span>{generatedMessage.length} characters / {generatedMessage.split(/\s+/).length} words</span>
        <Button
          type="button"
          variant="ghost"
          size="sm"
          onClick={handleGenerate}
        >
          <RotateCw className="w-3 h-3 mr-1" />
          Regenerate
        </Button>
      </div>
    </div>
  )}
</div>

Add required imports at the top of the file:

typescriptimport { Sparkles, Loader2, RotateCw } from "lucide-react";
import { Alert, AlertDescription } from "@/components/ui/alert";
Find the Composer component and implement these changes. The button should appear in the workflow after the user has filled in Contact, Goal, Channel, and CTA - typically in step 4 (Generate).